<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>CoffeeScript WebGL ARP Signing Avatar: vhg.2020</title>

<meta http-equiv="Access-Control-Allow-Origin" content="*">
<meta http-equiv="Access-Control-Allow-Methods" content="GET">

<!-- CWA @ vhg.cmp.uea.ac.uk/jrwg/ -->
<link rel="stylesheet"
    href="cwasa.css"/>
<script type="text/javascript"
    src="allcsa.js"></script>
</head>

<body onload="CWASA.init();">
    <script>
        /* JS comes here */
        function runSpeechRecognition() {
            // get output div reference
            var output = document.getElementById("output");
            // get action element reference
            var action = document.getElementById("action");
            // new speech recognition object
            var SpeechRecognition = SpeechRecognition || webkitSpeechRecognition;
            var recognition = new SpeechRecognition();
        
            // This runs when the speech recognition service starts
            recognition.onstart = function() {
                action.innerHTML = "<small>listening, please speak...</small>";
            };
            
            recognition.onspeechend = function() {
                action.innerHTML = "<small>stopped listening, hope you are done...</small>";
                recognition.stop();
            }
          
            // This runs when the speech recognition service returns result
            recognition.onresult = function(event) {
                var transcript = event.results[0][0].transcript;
                document.getElementById("txtTranscript").value = transcript
                // output.innerHTML = "<b>Text:</b> " + transcript + "<br/> <b>Confidence:</b> " + confidence*100+"%";
                output.classList.remove("hide");
            };
          
             // start recognition
             recognition.start();
        }
    </script>
 <!--================================================================-->
<h3>CoffeeScript WebGL ARP Signing Avatar with Animgen via JASigning: vhg.2020</h3>
<!-- <h4>Single Signing Avatar with complete GUI</h4> -->
<hr/>
<table align="center">
    <tr>
        <td width="8" align="center">
        <p>Click on the below button and speak something...(Only Chrome browser support for now)</p>
        <p><button type="button" onclick="runSpeechRecognition()">Speech to Text</button> &nbsp; <span id="action"></span></p>
        <div id="output" class="hide"></div>
        </td>
    </tr>
<!-- CWA signing avatar panel 0 -->

    <tr>
        <td width="8" align="center"><!--================================================================-->
            <div class="CWASASiGMLText av0" align="center" ></div>
            <!--================================================================-->
            <!-- CWA signing avatar panel 0 -->
            <!--================================================================-->
            <div class="CWASAPlay av0" align="center" ></div>
            <!--================================================================-->
            
        </td>
    </tr>   
    <tr>
        <td width = "500" height="500" align="center">
            <!--================================================================-->
            <div class="CWASAAvatar av0" align="center" ></div>
            <!--================================================================-->
            <!-- CWA signing avatar panel 0 -->
        </td>
    </tr>

        <!-- <tr>
            <td width="8">
    <span class="spanInfo av0">
        Status:
        <input type="text" class="statusExtra av0">
        </span>
    </tr> -->
</table>

<!-- CWA signing avatar panel 1 -->
<!--================================================================-->
<!--div class="CWASAPanel av1" align="center" ></div-->
<!--================================================================-->
<!--hr-->


<!-- Hidden SToCA applet element panel -->
<!--================================================================-->
<div class="SToCA" align="center" ></div>
<!--================================================================-->


</body>
</html>
